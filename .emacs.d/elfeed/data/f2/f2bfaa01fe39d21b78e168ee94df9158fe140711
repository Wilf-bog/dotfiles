
         
         <p>I just published the latest stable release of <a href="https://protesilaos.com/emacs/modus-themes">the Modus
themes</a>.  The change log
entry is reproduced further below.  It is a long read.  For any
questions, feel welcome to <a href="https://protesilaos.com/contact/">contact me</a>.</p>

<p>I will soon install the changes in emacs.git so please wait a little
longer for the updates to trickle down to you.</p>

<ul>
  <li>Package name (GNU ELPA): <code class="language-plaintext highlighter-rouge">modus-themes</code> (also built into Emacs 28+)</li>
  <li>Official manual: <a href="https://protesilaos.com/emacs/modus-themes">https://protesilaos.com/emacs/modus-themes</a></li>
  <li>Change log: <a href="https://protesilaos.com/emacs/modus-themes-changelog">https://protesilaos.com/emacs/modus-themes-changelog</a></li>
  <li>Colour palette: <a href="https://protesilaos.com/emacs/modus-themes-colors">https://protesilaos.com/emacs/modus-themes-colors</a></li>
  <li>Sample pictures: <a href="https://protesilaos.com/emacs/modus-themes-pictures">https://protesilaos.com/emacs/modus-themes-pictures</a></li>
  <li>Git repo on SourceHut: <a href="https://git.sr.ht/~protesilaos/modus-themes">https://git.sr.ht/~protesilaos/modus-themes</a>
    <ul>
      <li>Mirrors:
        <ul>
          <li>GitHub: <a href="https://github.com/protesilaos/modus-themes">https://github.com/protesilaos/modus-themes</a></li>
          <li>GitLab: <a href="https://gitlab.com/protesilaos/modus-themes">https://gitlab.com/protesilaos/modus-themes</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Mailing list: <a href="https://lists.sr.ht/~protesilaos/modus-themes">https://lists.sr.ht/~protesilaos/modus-themes</a></li>
  <li>Backronym: My Old Display Unexpectedly Sharpened … themes</li>
</ul>

<hr />

<h2>I won a Google award for the Modus themes</h2>

<p>Report here: <a href="https://protesilaos.com/codelog/2023-05-25-emacs-google-award/">https://protesilaos.com/codelog/2023-05-25-emacs-google-award/</a>.</p>

<p>This is not a “change” per se, but it is worth documenting here.  It
shows how important accessibility can be in empowering people to use
their computer and, in our case, to exercise their software freedoms.</p>

<p>The Modus themes tend to one aspect of accessibility.  They do not
exhaust the topic, though they should at least raise awareness about
the significance of tending to the usability needs of everyone.  The
effort I put into documenting the themes (and my other packages)
should be understood in this light as a means of helping people enjoy
their software freedom by learning how to use and extend the program
in question.</p>

<h2>New tritanopia-optimised themes</h2>

<p>I have created a pair of light and dark themes that are intended for
people with blue-yellow colour deficiency (tritanopia).  These are
<code class="language-plaintext highlighter-rouge">modus-operandi-tritanopia</code> (light) and <code class="language-plaintext highlighter-rouge">modus-vivendi-tritanopia</code>
(dark).  Screenshots of all the Modus themes are available on my
website: <a href="https://protesilaos.com/emacs/modus-themes-pictures">https://protesilaos.com/emacs/modus-themes-pictures</a>.</p>

<p>The entire collection is now described in the manual as follows:</p>

<blockquote>
  <p>The Modus themes consist of eight themes, divided into four subgroups.</p>

  <ul>
    <li>
      <p><strong>Main themes:</strong> <code class="language-plaintext highlighter-rouge">modus-operandi</code> is the project’s main light theme,
while <code class="language-plaintext highlighter-rouge">modus-vivendi</code> is its dark counterpart.  These two themes are
part of the project since its inception.  They are designed to cover
a broad range of needs and are, in the opinion of the author, the
reference for what a highly legible “default” theme should look
like.</p>
    </li>
    <li>
      <p><strong>Tinted themes:</strong> <code class="language-plaintext highlighter-rouge">modus-operandi-tinted</code> and <code class="language-plaintext highlighter-rouge">modus-vivendi-tinted</code>
are variants of the two main themes.  They slightly tone down the
intensity of the background and provide a bit more color variety.
<code class="language-plaintext highlighter-rouge">modus-operandi-tinted</code> has a set of base tones that are shades of
light ochre (earthly colors), while <code class="language-plaintext highlighter-rouge">modus-vivendi-tinted</code> gives a
night sky impression.</p>
    </li>
    <li>
      <p><strong>Deuteranopia themes:</strong> <code class="language-plaintext highlighter-rouge">modus-operandi-deuteranopia</code> and its
companion <code class="language-plaintext highlighter-rouge">modus-vivendi-deuteranopia</code> are optimized for users with
red-green color deficiency.  This means that they do not use red and
green hues for color-coding purposes, such as for diff removed and
added lines.  Instead, they implement colors that are discernible by
users with deueteranopia or deuteranomaly (mostly yellow and blue
hues).</p>
    </li>
    <li>
      <p><strong>Tritanopia themes:</strong> <code class="language-plaintext highlighter-rouge">modus-operandi-tritanopia</code> and its counterpart
<code class="language-plaintext highlighter-rouge">modus-vivendi-tritanopia</code> are optimized for users with blue-yellow
color deficiency.  The idea is the same as with the deuteranopia
variants: color coding relies only on hues that are accessible to
people with tritanopia or tritanomaly, namely, shades of red and
cyan.</p>
    </li>
  </ul>
</blockquote>

<h2>Recalibrated the “graph” colours in all themes</h2>

<p>The new palette subset improves the contrast of all the relevant
colours when presented side-by-side.  These are most notably used by
the <code class="language-plaintext highlighter-rouge">org-habit</code> consistency graph, which is displayed in the Org
agenda.  The deuteranopia and tritanopia themes have their own bespoke
colours for this purpose, due to their specific requirements for
colour coding (e.g. they cannot use green).</p>

<h2>Faces or face groups</h2>

<ul>
  <li>
    <p>Introduced a subtle 3D effect for clickable buttons, replacing the
previous 2D design.  I realised the flat style creates ambiguity
between the button and the text fields.  This happens, for example,
with <code class="language-plaintext highlighter-rouge">M-x customize-variable</code> for <code class="language-plaintext highlighter-rouge">org-capture-templates</code> which has
lots of button and text field combinations.  The added sense of
depth helps with the usability of these buttons because it makes
them unambiguous.  Personally, I prefer the 2D approach, but here we
have a trade-off between usability and aesthetics.  According to
what I state in the manual:</p>

    <blockquote>
      <p>If there arises an inescapable trade-off between usability and
stylistic considerations, we will always opt for the former.</p>
    </blockquote>
  </li>
  <li>
    <p>Refashioned the <code class="language-plaintext highlighter-rouge">whitespace-mode</code> to be much more subtle and added
the concomitant semantic colour mappings.</p>

    <p>The previous style involved the use of a dim grey background for
each invisible character.  While this is was good to spot invisible
characters quickly, it was a major hindrance for users who want to
run <code class="language-plaintext highlighter-rouge">whitespace-mode</code> at all times (e.g. for the Python programming
language which is space-sensitive).</p>

    <p>We thus remove the backgrounds by default but provide the option to
reinstate them via palette overrides (as documented at length in the
manual).  To this end, we have two new semantic colour mappings for
ordinary space, its invisible characters, as well as space errors.</p>

    <p>Thanks to Christian Tietze and Oliver Epper for their feedback in
issue 80 on the GitHub mirror:
<a href="https://github.com/protesilaos/modus-themes/issues/80">https://github.com/protesilaos/modus-themes/issues/80</a>.</p>
  </li>
  <li>
    <p>Applied a more subtle background for faces <code class="language-plaintext highlighter-rouge">menu-bar-mode</code>,
<code class="language-plaintext highlighter-rouge">tool-bar-mode</code>, <code class="language-plaintext highlighter-rouge">scroll-bar-mode</code>.  They do not need to stand out
so much because the toolkit already takes care of that.  Also, we do
not want to dillute the semantic value of either <code class="language-plaintext highlighter-rouge">bg-tab-bar</code> or
<code class="language-plaintext highlighter-rouge">fringe</code> palette colour mappings that I was wrongly using before in
this context.  Note that those faces may not apply, depending on the
underlying tool kit.  For example, I encounter them with the Lucid
build of Emacs, though not with the GTK one.</p>
  </li>
  <li>
    <p>Fix the critical typo of ‘widget-buton’, which prevented the actual
<code class="language-plaintext highlighter-rouge">widget-button</code> face from being affected by the themes.  Thanks to
Steve Downey for pointing it out in issue 73 on the GitHub mirror:
<a href="https://github.com/protesilaos/modus-themes/issues/73">https://github.com/protesilaos/modus-themes/issues/73</a>.</p>
  </li>
  <li>
    <p>Added support for the <code class="language-plaintext highlighter-rouge">disk-usage</code> package.  It is made to look like
Dired, to the extent possible.  Thanks to Nacho Barrientos for the
patch: <a href="https://lists.sr.ht/~protesilaos/modus-themes/patches/39822">https://lists.sr.ht/~protesilaos/modus-themes/patches/39822</a>.
The change is small and does not require copyright assignment to the
Free Software Foundation.</p>
  </li>
  <li>
    <p>Made the <code class="language-plaintext highlighter-rouge">eglot-diagnostic-tag-unnecessary-face</code> look like a
warning.  By default it inherits the <code class="language-plaintext highlighter-rouge">shadow</code> face, which makes it
counter-intuitive as it dims the text instead of bringing it to our
attention.  The intent of <code class="language-plaintext highlighter-rouge">eglot-diagnostic-tag-unnecessary-face</code> is
to highlight unused symbols, so this is better presented as a
warning.</p>

    <p>Thanks to Augusto Stoffel for bringing this matter to my attention.
This was done via a private channel and the information is shared
with permission.</p>
  </li>
  <li>
    <p>Changed the <code class="language-plaintext highlighter-rouge">smerge-markers</code> to inherit from <code class="language-plaintext highlighter-rouge">diff-header</code> instead
of <code class="language-plaintext highlighter-rouge">diff-heading</code>.  Thanks to Steve Downey for the contribution.
This was done in pull request 74 on the GitHub mirror:
<a href="https://github.com/protesilaos/modus-themes/pull/74">https://github.com/protesilaos/modus-themes/pull/74</a>.  The change
is small and does not require copyright assignment to the Free
Software Foundation.</p>
  </li>
  <li>
    <p>Added support for the <code class="language-plaintext highlighter-rouge">jinx</code> package.  This was originally done by
Tomasz Hołubowicz in pull request 71 on the GitHub mirror:
<a href="https://github.com/protesilaos/modus-themes/pull/71">https://github.com/protesilaos/modus-themes/pull/71</a>.  The change
is small and does not require copyright assignment to the Free
Software Foundation.  I then modified it to make the underlines look
like warnings instead of errors.  This is because of how the package
works: it automatically highlights misspellings in the visible
portion of the buffer.  There are cases where this results in a very
intense presentation, which can be distracting.  We want to reduce
the overall intensity and not draw too much attention to those
highlights.</p>
  </li>
  <li>
    <p>Extended coverage of Org to the new <code class="language-plaintext highlighter-rouge">org-agenda-calendar-daterange</code>
face (part of Org version 9.7).  Thanks to Gautier Ponsinet for the
patch, which I received via a private channel.  The change is small
and does not require copyright assignment to the Free Software
Foundation.  In addition to this, I introduced a new semantic colour
mapping in the themes’ palette called <code class="language-plaintext highlighter-rouge">date-range</code>.  This can be
used with the palette overrides, which are documented at length in
the manual (there are lots of copy-pastable examples as well).</p>
  </li>
  <li>
    <p>Supported all of the new faces of the built-in <code class="language-plaintext highlighter-rouge">proced</code> package.
These are part of Emacs 29 and make the <code class="language-plaintext highlighter-rouge">proced</code> buffers more
colourful, subject to the user option <code class="language-plaintext highlighter-rouge">proced-enable-color-flag</code>.
As always, the themes strive to avoid exaggerations, meaning that I
apply colour with restraint: not all faces need to stand out.</p>
  </li>
  <li>
    <p>Included the <code class="language-plaintext highlighter-rouge">rst-mode</code> in the list of explicitly supported
packages, making its heading look like those of Org, Markdown, etc.
Thanks to David Edmondson for the patch:
<a href="https://lists.sr.ht/~protesilaos/modus-themes/patches/40625">https://lists.sr.ht/~protesilaos/modus-themes/patches/40625</a>.  I
believe David has already assigned copyright to the Free Software
Foundation, though this patch is small anyway.</p>
  </li>
  <li>
    <p>Covered all the new faces of the built-in <code class="language-plaintext highlighter-rouge">flymake</code> package.  These
concern the inline feedback messages (Emacs 30) as well as those
that appear in the echo area (Emacs 29).  The former are subject to
the user option <code class="language-plaintext highlighter-rouge">flymake-show-diagnostics-at-end-of-line</code>.</p>
  </li>
  <li>
    <p>Reduced the intensity of the <code class="language-plaintext highlighter-rouge">which-key</code> prefix descriptions.  Those
are the keymaps that displayed by <code class="language-plaintext highlighter-rouge">which-key</code> to hint that typing
the given key will open a new <code class="language-plaintext highlighter-rouge">which-key</code> page with more keys.</p>
  </li>
  <li>
    <p>Configured new <code class="language-plaintext highlighter-rouge">vundo-saved</code> and <code class="language-plaintext highlighter-rouge">vundo-last-saved</code> faces of the
<code class="language-plaintext highlighter-rouge">vundo</code> package.  They are designed to be easy to read, without
going over-the-top.  Thanks to Nicolas Semrau for bringing this
matter to my attention in issue 79 on the GitHub mirror:
<a href="https://github.com/protesilaos/modus-themes/issues/79">https://github.com/protesilaos/modus-themes/issues/79</a>.</p>
  </li>
  <li>
    <p>Removed the deprecated <code class="language-plaintext highlighter-rouge">consult-preview-cursor</code> face and made the
requisite adjustments to the <code class="language-plaintext highlighter-rouge">consult</code> faces.  This was done in
commit <code class="language-plaintext highlighter-rouge">267b0c9</code> of the Consult Git repository.  Discussed here:
<a href="https://github.com/minad/consult/issues/764#issuecomment-1537491625">https://github.com/minad/consult/issues/764#issuecomment-1537491625</a>.</p>
  </li>
  <li>
    <p>Instructed the <code class="language-plaintext highlighter-rouge">shr-selected-link</code> face of the built-in <code class="language-plaintext highlighter-rouge">shr</code>
package to use a “mark selection” style instead of the semantically
incorrect “intense red” it had before.  This change is helpful for
those who override the palette of their Modus theme of choice, while
it also allows us to have varied colours depending on the
requirements of each theme (e.g. deuteranopia/tritanopia compared to
the defaults).</p>
  </li>
  <li>
    <p>Did the same as above, mutatis mutandis, for the faces
<code class="language-plaintext highlighter-rouge">transient-disabled-suffix</code>, <code class="language-plaintext highlighter-rouge">web-mode-error-face</code>,
<code class="language-plaintext highlighter-rouge">erc-dangerous-host-face</code>, <code class="language-plaintext highlighter-rouge">aw-minibuffer-leading-char-face</code>,
<code class="language-plaintext highlighter-rouge">binder-sidebar-highlight</code>, <code class="language-plaintext highlighter-rouge">binder-sidebar-missing</code>,
<code class="language-plaintext highlighter-rouge">image-dired-thumb-flagged</code>, <code class="language-plaintext highlighter-rouge">image-dired-thumb-mark</code>,
<code class="language-plaintext highlighter-rouge">info-menu-star</code>, <code class="language-plaintext highlighter-rouge">rainbow-delimiters-mismatched-face</code>,
<code class="language-plaintext highlighter-rouge">evil-ex-substitute-matches</code>, <code class="language-plaintext highlighter-rouge">iedit-occurrence</code>,
<code class="language-plaintext highlighter-rouge">iedit-read-only-occurrence</code>, <code class="language-plaintext highlighter-rouge">pgtk-im-0</code>, <code class="language-plaintext highlighter-rouge">dired-narrow-blink</code>.</p>
  </li>
  <li>
    <p>Enhanced the <code class="language-plaintext highlighter-rouge">image-dired</code> mark faces with a box border, as the use
of a background alone can be obscured by the underlying image
thumbnail, depending on its figures/colours.</p>
  </li>
  <li>
    <p>Removed the backgrounds from the <code class="language-plaintext highlighter-rouge">powerline-evil</code> faces and
simplified their overral presentation in the interest of
maintainability.  The old styles were hard to predict and test.
There could easily be conflicts, such as if the user would override
the colours of the mode line.</p>
  </li>
  <li>
    <p>Ensured that <code class="language-plaintext highlighter-rouge">diary</code> and <code class="language-plaintext highlighter-rouge">holiday</code> colours are distinct and legible,
without being too intense.</p>
  </li>
</ul>

<h2>Changes to the manual or other documentation</h2>

<ul>
  <li>
    <p>Updated the doc string of the primary customisation group defined by
the themes to reflect the support for the case of tritanopia.</p>
  </li>
  <li>
    <p>Included links to the web page of the manual and the one with the
sample pictures in the customisation groups.  Those links appear in
the various Custom UI buffers.</p>
  </li>
  <li>
    <p>Introduced an annotation function for all commands that involve
minibuffer completion.  The annotations display the one-line
description of each theme, making it easier for a user to pick their
preferred choice (e.g. when using the <code class="language-plaintext highlighter-rouge">modus-themes-select</code>
command).</p>
  </li>
  <li>
    <p>Defined semantic colour mappings for “marks”.  These are used by
<code class="language-plaintext highlighter-rouge">dired</code>, <code class="language-plaintext highlighter-rouge">trashed</code>, <code class="language-plaintext highlighter-rouge">proced</code>, and others.  These is no change to the
default appearance of what users are already familiar with, though
it is now possible to override those styles.</p>
  </li>
  <li>
    <p>Complemented the subset of semantic colour mappings for
errors/warnings with “prominent” variants.  Those employ a
background and foreground combination.  They are used in all sorts
of contexts, such as for fringe errors (<code class="language-plaintext highlighter-rouge">flymake</code>, <code class="language-plaintext highlighter-rouge">flycheck</code>, …),
<code class="language-plaintext highlighter-rouge">query-replace</code>, <code class="language-plaintext highlighter-rouge">isearch-fail</code>, and others.</p>
  </li>
  <li>
    <p>Wrote sample code on how to add “padding” to the Emacs frame and the
space between the Emacs windows.  This makes for a presentation that
some users find easier to work with.</p>
  </li>
  <li>
    <p>Corrected the sample code for <code class="language-plaintext highlighter-rouge">git-gutter</code> to use the appropriate
symbols from the theme palette.  Thanks to Christian Tietze for the
patch: <a href="https://lists.sr.ht/~protesilaos/modus-themes/patches/40354">https://lists.sr.ht/~protesilaos/modus-themes/patches/40354</a>.
The change is small and does not require copyright assignment to the
Free Software Foundation.</p>
  </li>
  <li>
    <p>Removed <code class="language-plaintext highlighter-rouge">moody</code> from the list of packages explicitly supported by
the themes.  We stopped supporting it since version 4 that removed
the relevant user option for the mode line.  The idea is that the
mode line is better handled by the user without interference from
the theme, due to the number of options available (and how brittle
those can be when interacting with unpredictable face definitions).
Thanks to Nicolas De Jaeghere for reminding me to remove <code class="language-plaintext highlighter-rouge">moody</code>
from the manual:
<a href="https://lists.sr.ht/~protesilaos/modus-themes/%3Cypi9jzyclqxy.fsf%40gmail.com%3E#%3C87jzybdgg1.fsf@dejaeghe.re%3E">https://lists.sr.ht/~protesilaos/modus-themes/%3Cypi9jzyclqxy.fsf%40gmail.com%3E#%3C87jzybdgg1.fsf@dejaeghe.re%3E</a>.</p>
  </li>
</ul>

<h2>Miscellaneous</h2>

<ul>
  <li>
    <p>Added two new preset palette overrides to make the overall
presentation “warmer” or “cooler”.  Those are called
<code class="language-plaintext highlighter-rouge">modus-themes-preset-overrides-warmer</code> and
<code class="language-plaintext highlighter-rouge">modus-themes-preset-overrides-cooler</code>, respectively.  The manual
explains how those presets can be used.  I suggest the user does
not add such overrides if they intend to load any of the
deuteranopia or tritanopia themes, due to the specific
requirements of their design.</p>
  </li>
  <li>
    <p>Refined the deuteranopia yellows for warnings, errors, and comments.
These otherwise slight adjustments make it considerably easier to
tell apart distinct elements that may be positioned close together.</p>
  </li>
  <li>
    <p>Tweaked the deuteranopia semantic colour mappings for emails.  The
subject line use a more appropriate colour value, while level 3
quotes stand out a bit more than they did before, without being
needlessly intense.</p>
  </li>
  <li>
    <p>Arranged for the <code class="language-plaintext highlighter-rouge">modus-themes-load-theme</code> function return the
value of the <code class="language-plaintext highlighter-rouge">THEME</code> argument it accepts.  The intent is to allow
other functions that call this one to capture the return value for
their purposes (such as with a <code class="language-plaintext highlighter-rouge">let</code> binding).  Thank to Oliver
Epper for the feedback in issue 78 on the GitHub mirror:
<a href="https://github.com/protesilaos/modus-themes/issues/78">https://github.com/protesilaos/modus-themes/issues/78</a>.</p>
  </li>
</ul>
        
      