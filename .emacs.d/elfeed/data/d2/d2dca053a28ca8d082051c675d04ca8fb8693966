
	
<p>
The world is full of distractions, especially when focusing on writing. Most writing software is littered with icons and options to change the documentâ€™s design. Distraction-free writing tools remove distractions from the screen, so they become more like electronic typewriters that let the author focus on content over form. This article shows how to use Emacs Or Mode for Distraction-Free writing, using the built-in Org mode package.</p>
<p>
This article is part of <a href="https://lucidmanager.org/tags/emacs/">Emacs Writing Studio</a>, which explains how to use Emacs to undertake research and write and publish articles, books, and websites. You can find the configuration on GitHub:</p>
<p>
<a href = "https://github.com/pprevos/emacs-writing-studio/" target="_blank"
   title="Download emacs-writing-studio from GitHub"
   alt="Download emacs-writing-studio from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">emacs-writing-studio</span>
  </button>
</a>

</p>
<div id="outline-container-headline-1" class="outline-2">
<h2 id="headline-1">
Getting started with Org mode
</h2>
<div id="outline-text-headline-1" class="outline-text-2">
<p>Org mode is a powerful major mode that comes with Emacs by default. This software was initially developed in 2003 by Carsten Dominik, a professor of astronomy at the University of Amsterdam. Since then, countless other developers have continued to advance Org-mode.</p>
<p>
You can use Org mode to <a href="https://lucidmanager.org/productivity/create-websites-with-org-mode-and-hugo/">publish websites</a>, <a href="https://lucidmanager.org/productivity/publishing-with-org-mode-export/">articles and books</a>, <a href="https://lucidmanager.org/productivity/taking-notes-with-emacs-denote/">keep a diary</a>, <a href="https://lucidmanager.org/productivity/taking-notes-with-emacs-org-mode-and-org-roam/">keep research notes</a>, <a href="https://lucidmanager.org/productivity/getting-things-done-with-emacs/">manage your actions</a>, and much more. And on top of all that, it is intuitive to use. This section shows you the basics of writing prose in Org mode with a screencast by Jake B. that briefly summarises the major options within Org mode.</p>
<figure>


    
    <div style="position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden;">
      <iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen="allowfullscreen" loading="eager" referrerpolicy="strict-origin-when-cross-origin" src="https://www.youtube.com/embed/hnMntOQjs7Q?autoplay=0&controls=1&end=0&loop=0&mute=0&start=0" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; border:0;" title="YouTube video"
      ></iframe>
    </div>

<figcaption>
Emacs Org Mode Demo by Jake B.
</figcaption>
</figure>
<div id="outline-container-headline-2" class="outline-3">
<h3 id="headline-2">
Creating new Org mode buffers
</h3>
<div id="outline-text-headline-2" class="outline-text-3">
<p>To start an Org file, create a file with a <code class="verbatim">.org</code> extension and start writing, for example, <code class="verbatim">C-x C-f test.org &lt;Enter&gt;</code>.</p>
<p>
Each Org document starts with a header that contains metadata and settings relevant to the buffer. The Org mode metadata and settings start with <code class="verbatim">#+</code> followed by a keyword and a colon. The document header can also contain metadata such as a subtitle or a date. Emacs packages can use this information when publishing the text and other functionality.</p>
<div class="src src-org">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span>  #+title:   Lorem Ipsum
</span></span><span style="display:flex;"><span>  #+author:  Nomen Nescio
</span></span><span style="display:flex;"><span>  #+date:    [2021-05-08 Sat]</span></span></code></pre></div>
</div>
<p>
Org mode recognises several other types of front matter items to control exporting and other behaviours, some of which are mentioned below.</p>
<p>
Your chosen Emacs theme will set the size and font for your document. The only purpose of these decorations is to help you navigate the document. The article about <a href="https://lucidmanager.org/productivity/publishing-with-org-mode-export/">publishing articles and books with Org mode</a> shows how to control the output format.</p>
&nbsp;
</div>
</div>
<div id="outline-container-headline-3" class="outline-3">
<h3 id="headline-3">
Document Structure
</h3>
<div id="outline-text-headline-3" class="outline-text-3">
<p>Books have chapters, sections and paragraphs; articles have headings; poems have verses; and so on. Almost all forms of writing have a hierarchy. An excellent method to start writing is to work out your hierarchical structure and fill it with content. </p>
<p>
Org mode is an outlining tool that helps you develop a document structure. Write an asterisk as the first character to start a new header, followed by a space. To create deeper levels, add more stars:</p>
<div class="src src-org">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span>  <span style="color:#080;font-weight:bold">* </span>Heading 1
</span></span><span style="display:flex;"><span>  ** Heading 2
</span></span><span style="display:flex;"><span>  *** Heading 3</span></span></code></pre></div>
</div>
<p>
When you press <code class="verbatim">M-enter</code>, the following line becomes a new heading. With <code class="verbatim">C-enter</code>, the next line is added after the text in the current section.</p>
<p>
Org mode makes it easy to move and promote or demote headings and associated text (which in Org mode is a subtree) with the <code class="verbatim">ALT</code> and arrow keys.</p>
<p>
You can collapse or expand a heading with the <code class="verbatim">TAB</code> key. Pressing <code class="verbatim">S-TAB</code> will collapse the document, showing only the level one headings. Pressing <code class="verbatim">S-TAB</code> once again will show the headings, and repeating it for a second time reveals the entire buffer. You can keep cycling through these modes with the <code class="verbatim">S-TAB</code> key.</p>
<ul>
<li><code class="verbatim">TAB</code> / <code class="verbatim">S-TAB</code>: (un)fold headings</li>
<li><code class="verbatim">M-up</code> / <code class="verbatim">M-down</code>: move a headline up or down</li>
<li><code class="verbatim">M-left</code> / <code class="verbatim">M-right</code>: promote or demote a headline</li>
<li><code class="verbatim">M-RET</code>: insert a new headline</li>
</ul>
<p>Add numbers to the headers with the <code class="verbatim">num</code> option in the startup line: <code class="verbatim">#+startup: num</code>. Whether this numbering appears in any published output depends on your configuration.</p>
&nbsp;
</div>
</div>
<div id="outline-container-headline-4" class="outline-3">
<h3 id="headline-4">
Rich Text
</h3>
<div id="outline-text-headline-4" class="outline-text-3">
<p>To change how Org Mode displays text, you surround it with special characters: <code class="verbatim">/italic/</code>, <code class="verbatim">*bold*</code>, <code class="verbatim">_underline_</code>, <code class="verbatim">+striketrough+</code> and <code class="verbatim">=verbatim=</code>. You will see these markers in the Org mode text, but they disappear when you export the buffer. </p>
&nbsp;
</div>
</div>
<div id="outline-container-headline-5" class="outline-3">
<h3 id="headline-5">
Lists
</h3>
<div id="outline-text-headline-5" class="outline-text-3">
<p>Writing lists in Org mode could not be easier. Simply start a line with a dash and complete the entry with <code class="verbatim">M-ENTER</code> to create the next entry. Using the <code class="verbatim">TAB</code> and left or right arrow keys changes the depth of the item and, with the up and down arrows, moves the line up or down in the hierarchy. Change the list prefix with the <code class="verbatim">SHIFT</code> and left/right arrow keys.</p>
<div class="src src-org">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span>  <span style="color:#080;font-weight:bold">- </span>Item
</span></span><span style="display:flex;"><span>    <span style="color:#080;font-weight:bold">+ </span>next item
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">1.</span> The following
</span></span><span style="display:flex;"><span>      <span style="color:#080;font-weight:bold">2.</span> And another
</span></span><span style="display:flex;"><span>         a. Down, down, deeper and down</span></span></code></pre></div>
</div>
<p>
The following configuration line enables alphabetically ordered lists as well as numerals.</p>
<div class="src src-elisp">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>  (<span style="color:#007020">use-package</span> <span style="color:#963">org</span>
</span></span><span style="display:flex;"><span>    <span style="color:#007020">:custom</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#963">org-list-allow-alphabetical</span> <span style="color:#036;font-weight:bold">t</span>))</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-6" class="outline-3">
<h3 id="headline-6">
Tables
</h3>
<div id="outline-text-headline-6" class="outline-text-3">
<p>Every cell in an Org mode table is flanked by the pipe <code class="verbatim">|</code> symbol. You don&#39;t have to worry about aligning the text, as the <code class="verbatim">TAB</code> key does that for you. You create a horizontal line when you start a line with <code class="verbatim">|-</code> and hit <code class="verbatim">TAB</code>.</p>
<div class="src src-org">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span><span style="background-color:#fff0f0">| Column 1 | Column 2 |</span>
</span></span><span style="display:flex;"><span><span style="background-color:#fff0f0">|----------+----------|</span>
</span></span><span style="display:flex;"><span><span style="background-color:#fff0f0">| Sator    |       12 |</span>
</span></span><span style="display:flex;"><span><span style="background-color:#fff0f0">| Arepo    |       26 |</span>
</span></span><span style="display:flex;"><span><span style="background-color:#fff0f0">| Tenet    |      878 |</span>
</span></span><span style="display:flex;"><span><span style="background-color:#fff0f0">| Opera    |       89 |</span>
</span></span><span style="display:flex;"><span><span style="background-color:#fff0f0">| Rotas    |       89 |</span></span></span></code></pre></div>
</div>
<p>
You navigate forward through the cells with the <code class="verbatim">TAB</code> or arrow up/down keys. Using <code class="verbatim">s-TAB</code> moves you back one cell. Combining Alt and Shift with the arrow keys adds and removes columns and rows.</p>
<p>
Org mode has <a href="https://orgmode.org/manual/Tables.html">extensive capabilities to edit tables</a>, including formulas to create spreadsheet functionality.</p>
&nbsp;
</div>
</div>
<div id="outline-container-headline-7" class="outline-3">
<h3 id="headline-7">
Images
</h3>
<div id="outline-text-headline-7" class="outline-text-3">
<p>Although Emacs is a text editor, it can also <a href="https://lucidmanager.org/productivity/using-emacs-image-dired/">manage images</a>. In Org mode, an image is a link to an image file. You can preview the file in your buffer or export it to your preferred format. You can also add captions and set display or export properties for each image.</p>
<div class="src src-org">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span>  #+caption: Image caption.
</span></span><span style="display:flex;"><span>  #+attr_html: :alt Alternative text
</span></span><span style="display:flex;"><span>  [[<span style="color:#00c">file:path/to/image</span>]]</span></span></code></pre></div>
</div>
<p>
To view the preview images in your document or remove the previews, you press <code class="verbatim">C-c C-x C-v</code> (<code>org-toggle-inline-images</code>). You can also add <code class="verbatim">#+startup: inlineimages</code> to view images by default for the buffer.</p>
<p>
To add an image, press <code class="verbatim">C-c C-l</code> (<code>org-insert-link</code>), which opens the link menu. Org mode understands many types of links. We want the file type, so type <code class="verbatim">file:</code>. Press enter and select the image filename in the mini buffer. You can skip the <code class="verbatim">file</code> part with the <code class="verbatim">C-u C-c C-l</code> shortcut (adding <code class="verbatim">C-u</code> before the standard shortcut.)</p>
<p>
After adding the image, you preview it with the <code>org-redisplay-inline-images</code> function or <code class="verbatim">C-c C-x C-M-v</code>.</p>
<p>
You open a link in Org mode with a mouse click or by pressing <code class="verbatim">C-c C-o</code> (<code>org-open-at-point</code>) with your cursor on the link text. Emacs has some facilities to manage image libraries through the <a href="https://lucidmanager.org/productivity/using-emacs-image-dired/">image-dired package</a>.</p>
<p>
The images in the buffer are all shown at the same width, which you <a href="https://lucidmanager.org/productivity/ricing-org-mode/">can configure</a> to meet your needs. The articles about <a href="https://lucidmanager.org/productivity/publishing-with-org-mode-export/">writing articles and books with Emacs</a> and the article about <a href="https://lucidmanager.org/productivity/create-websites-with-org-mode-and-hugo/">creating websites with Emacs</a> explains how to control image size and other image properties.</p>
<p>
<em>Emacs Writing Studio</em> provides a convenience function to insert images from screenshots, which is bound to the <code class="verbatim">Control-PrintScreen</code> key. This function asks for a filename (and forces a PNG extension). The user then selects a partial screenshot and a caption. The function then inserts the image link and caption.</p>
<div class="src src-elisp">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>  (<span style="color:#007020">defun</span> <span style="color:#963">ews-org-insert-screenshot</span> ()
</span></span><span style="display:flex;"><span>    <span style="background-color:#fff0f0">&#34;Take a screenshot with ImageMagick and insert as an Org mode link.&#34;</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#007020">interactive</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#007020">let</span> ((<span style="color:#963">filename</span> (<span style="color:#963">read-file-name</span> <span style="background-color:#fff0f0">&#34;Enter filename for screenshot: &#34;</span> <span style="color:#963">default-directory</span>)))
</span></span><span style="display:flex;"><span>      (<span style="color:#007020">unless</span> (<span style="color:#06b;font-weight:bold">string-equal</span> <span style="background-color:#fff0f0">&#34;png&#34;</span> (<span style="color:#963">file-name-extension</span> <span style="color:#963">filename</span>))
</span></span><span style="display:flex;"><span>        (<span style="color:#007020">setq</span> <span style="color:#963">filename</span> (<span style="color:#06b;font-weight:bold">concat</span> (<span style="color:#963">file-name-sans-extension</span> <span style="color:#963">filename</span>) <span style="background-color:#fff0f0">&#34;.png&#34;</span>)))
</span></span><span style="display:flex;"><span>      (<span style="color:#963">call-process-shell-command</span> (<span style="color:#06b;font-weight:bold">format</span> <span style="background-color:#fff0f0">&#34;import %s&#34;</span> <span style="color:#963">filename</span>))
</span></span><span style="display:flex;"><span>      (<span style="color:#06b;font-weight:bold">insert</span> (<span style="color:#06b;font-weight:bold">format</span> <span style="background-color:#fff0f0">&#34;#+caption: %s\n&#34;</span> (<span style="color:#06b;font-weight:bold">read-from-minibuffer</span> <span style="background-color:#fff0f0">&#34;Caption: &#34;</span>)))
</span></span><span style="display:flex;"><span>      (<span style="color:#06b;font-weight:bold">insert</span> (<span style="color:#06b;font-weight:bold">format</span> <span style="background-color:#fff0f0">&#34;[[file:%s]]&#34;</span> <span style="color:#963">filename</span>))
</span></span><span style="display:flex;"><span>      (<span style="color:#963">org-redisplay-inline-images</span>)))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">with-eval-after-load</span> <span style="background-color:#fff0f0">&#34;org&#34;</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#06b;font-weight:bold">define-key</span> <span style="color:#963">org-mode-map</span> (<span style="color:#963">kbd</span> <span style="background-color:#fff0f0">&#34;C-&lt;print&gt;&#34;</span>) <span style="color:#06b;font-weight:bold">#&#39;</span><span style="color:#963">ews-org-insert-screenshot</span>))</span></span></code></pre></div>
</div>
</div>
</div>
<div id="outline-container-headline-8" class="outline-3">
<h3 id="headline-8">
Chapter numbering
</h3>
<div id="outline-text-headline-8" class="outline-text-3">
<p>Org mode will number every heading when the <code class="verbatim">#+startup: num</code> option is set. The numbering will appear in the Org file. How numbering is treated in the export depends on the file format you use.</p>
<p>
In some publications, not all headers are numbered, such as in the front matter of a book. You can exclude individual sections from being numbered by setting the <code class="verbatim">:unnumbered:</code> property as shown below. To add this property, drawer, type <code class="verbatim">C-c C-x p</code>, select the relevant property and enter the value.</p>
<div class="src src-org">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span><span style="color:#888">:PROPERTIES:
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#c00;font-weight:bold">:UNNUMBERED: t
</span></span></span><span style="display:flex;"><span><span style="color:#c00;font-weight:bold"></span><span style="color:#888">:END:</span></span></span></code></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-9" class="outline-2">
<h2 id="headline-9">
Citation Management
</h2>
<div id="outline-text-headline-9" class="outline-text-2">
<p>Citations are the engine of academic writing. Org mode has a built-in citation management tool. You will first need to <a href="https://lucidmanager.org/productivity/emacs-bibtex-mode/">create a bibliography</a>. You can either create one yourself, or dynamically link a file from a bibliography management tool such as Zotero.</p>
<p>
Bibliographies can be global or local. The global bibliography is accessible from any place in Emacs, while the local bibliography file is only available within your Org mode file.</p>
<p>
The global bibliography is set in your configuration (<code>org-cite-global-bibliography</code> variable) and can consist of one or more BibTeX / CSL files.</p>
<p>
The local bibliography is linked to an Org mode file with the <code class="verbatim">#+bibliography: &#34;bibfile.bib&#34;</code> in your document header.</p>
<p>
You can insert citations with <code>org-cite-insert</code> (<code class="verbatim">C-c C-x @</code>). Within <em>Emacs Writing Studio</em>, this command opens the Citar menu from where you can select one or more publications. A citation will look something like this: <code class="verbatim">[cite:@einstein_1905;@newton_1728]</code>.</p>
<p>
You can access the resources related to a citation with <code>org-open-at-point</code> (<code class="verbatim">C-c C-o</code>), which opens the Citar menu for the citation under point. If the citation has no entry in your local or global bibliography, then Org mode will warn that it could not find a match and will ask you to create a new heading, which of course is not the case.</p>
<p>
Citar indicates wether an entry is cited in your project with a <code class="verbatim">C</code> in the list of publications.</p>
<p>
Org mode has detailed methods to determine how citations are rendered in exported documents, which is discussed in <a href="https://lucidmanager.org/productivity/publishing-with-org-mode-export/">another article</a>.</p>
</div>
</div>
<div id="outline-container-headline-10" class="outline-2">
<h2 id="headline-10">
Managing Your Writing Project
</h2>
<div id="outline-text-headline-10" class="outline-text-2">
<p>A writing project is about more than just smashing words into a document. Some functionality is available to add notes to your project, manage word counts and overall progress of your writing.</p>
<div id="outline-container-headline-11" class="outline-3">
<h3 id="headline-11">
Large Projects
</h3>
<div id="outline-text-headline-11" class="outline-text-3">
<p>Writing a book in a single Org mode file can be laborious because you need to navigate a large file. The built-in narrowing tool can help in keeping your focus. Narrowing in Emacs means that the buffer will only show a selected part of your text so you don&#39;t get distracted by the rest of the document. The hidden text is still available, just not visible on the screen.</p>
<p>
To narrow your buffer to only show the subtree (heading and associated subheadings) you are currently working in use <code>org-narrow-to-subtree</code> (<code class="verbatim">C-x n s</code>). This commands reduces the visible text to the section under consideration. To go back to the full document evaluate the <code>widen</code> command (<code class="verbatim">C-x n w</code>).</p>
<p>
Sometimes it might be a good idea to split larger projects over multiple files. Org mode has an inclusion function that creates a link between documents.</p>
<p>
The <code class="verbatim">#+include: &#34;chapter-02.org&#34;</code> line includes a file named Chapter 02 inside the main document. You can visit this child document with <code class="verbatim">C-c &#39;</code> (<code>org-edit-special</code>). Org mode has some <a href="https://orgmode.org/manual/Include-Files.html">additional options</a> to determine exactly which part of the child document is included.</p>
<p>
This method allows you to work on a book or dissertation and store each chapter in a separate file. When you export the main file to a PDF, or ePUB file, all included files are added to the export. </p>
&nbsp;
</div>
</div>
<div id="outline-container-headline-12" class="outline-3">
<h3 id="headline-12">
Adding Notes
</h3>
<div id="outline-text-headline-12" class="outline-text-3">
<p>Sometimes, adding notes to your text that should be separate from the final version is worthwhile. You should add a checklist of what needs to be done, links to websites or notes in your Denote digital garden, or anything else of importance during the process of writing. </p>
<p>
Any line in Org mode that starts with a hashtag or pound symbol is a comment, which Emacs ignores when exporting the text to the final output. </p>
<div class="src src-org">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span>  # This is a comment</span></span></code></pre></div>
</div>
<p>
Org mode also has handy drawers, which are bits of collapsible text that can store notes. You can keep multiple lines of text in a drawer, for example, if you need to cut out a bit of text and would like to save it for future reference. The beauty of Org mode drawers is that they are collapsible, so their contents do not distract you from the primary task. You can close or open a drawer with the <code class="verbatim">TAB</code> key when the cursor is on the drawer.</p>
<div class="src src-org">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span>  ** This is a headline
</span></span><span style="display:flex;"><span><span style="color:#888">  :DRAWER_NAME:
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#c00;font-weight:bold">  This is inside the drawer.
</span></span></span><span style="display:flex;"><span><span style="color:#c00;font-weight:bold"></span><span style="color:#888">  :END:</span>
</span></span><span style="display:flex;"><span>  
</span></span><span style="display:flex;"><span>  After the drawer.</span></span></code></pre></div>
</div>
<p>
You can interactively insert a drawer at point by calling the <code>org-insert-drawer</code>, bound to <code class="verbatim">C-c C-x d</code>. The selected text will be placed inside the drawer when a region is active. This function will add the name for your drawer, usually written in full caps. The drawer is inserted at the current location of the cursor.</p>
<p>
An <em>Emacs Writing Studio</em> function (<code>ews-org-insert-notes-drawer</code>) generates notes drawers, bound to the <code class="verbatim">C-c C-x n</code> keyboard shortcut. This function jumps just below the heading of the section you are writing and generates a notes drawer. If a drawer exists for this section, a new line is created at the end of the current note. After you finish writing the note, <code class="verbatim">C-u C-SPACE</code> will take you back to your original position in the text.</p>
<div class="src src-elisp">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>  <span style="color:#888">;; Notes drawers</span>
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">defun</span> <span style="color:#963">ews-org-insert-notes-drawer</span> ()
</span></span><span style="display:flex;"><span>    <span style="background-color:#fff0f0">&#34;Generate or open a NOTES drawer under the current heading.&#34;</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#007020">interactive</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#963">push-mark</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#963">org-previous-visible-heading</span> <span style="color:#00d;font-weight:bold">1</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#963">next-line</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#963">org-beginning-of-line</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#007020">if</span> (<span style="color:#963">looking-at-p</span> <span style="background-color:#fff0f0">&#34;^[ \t]*:NOTES:&#34;</span>)
</span></span><span style="display:flex;"><span>        (<span style="color:#007020">progn</span>
</span></span><span style="display:flex;"><span>          (<span style="color:#963">org-fold-hide-drawer-toggle</span> <span style="color:#a60;background-color:#fff0f0">&#39;off</span>)
</span></span><span style="display:flex;"><span>          (<span style="color:#06b;font-weight:bold">re-search-forward</span> <span style="background-color:#fff0f0">&#34;^[ \t]*:END:&#34;</span> <span style="color:#036;font-weight:bold">nil</span> <span style="color:#036;font-weight:bold">t</span>)
</span></span><span style="display:flex;"><span>          (<span style="color:#963">previous-line</span>)
</span></span><span style="display:flex;"><span>          (<span style="color:#963">org-end-of-line</span>)
</span></span><span style="display:flex;"><span>          (<span style="color:#963">org-return</span>))
</span></span><span style="display:flex;"><span>      (<span style="color:#963">org-insert-drawer</span> <span style="color:#036;font-weight:bold">nil</span> <span style="background-color:#fff0f0">&#34;NOTES&#34;</span>))
</span></span><span style="display:flex;"><span>    (<span style="color:#963">org-unlogged-message</span> <span style="background-color:#fff0f0">&#34;Press &lt;C-u C-SPACE&gt; to return to the previous position.&#34;</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  (<span style="color:#007020">with-eval-after-load</span> <span style="background-color:#fff0f0">&#34;org&#34;</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#06b;font-weight:bold">define-key</span> <span style="color:#963">org-mode-map</span> (<span style="color:#963">kbd</span> <span style="background-color:#fff0f0">&#34;C-c C-x n&#34;</span>) <span style="color:#06b;font-weight:bold">#&#39;</span><span style="color:#963">ews-org-insert-notes-drawer</span>))</span></span></code></pre></div>
</div>
<p>
If you need to take any notes unrelated to the document at hand, then a fleeting note stored in your central inbox is a better choice. The <a href="https://lucidmanager.org/productivity/taking-notes-with-emacs-denote/">Org mode capture mechanism</a> is the best solution for these situations.</p>
&nbsp;
</div>
</div>
<div id="outline-container-headline-13" class="outline-3">
<h3 id="headline-13">
Counting Words
</h3>
<div id="outline-text-headline-13" class="outline-text-3">
<p>Emacs has a built-in functionality to count words in a region using the <code>count-words-region</code> function (<code class="verbatim">M ==</code>). To find out how many words each chapter or section of your work has, you will need to run this for each part of your document. Within Org mode, there is an easy way to automate this behaviour and get an almost instant overview of your word count for each document part. This method will also let you add word count targets for each section so you can monitor progress or balance your writing.</p>
<p>
Org mode can add properties to each heading, which we can leverage to add word counts. To add a property, use <code class="verbatim">C-c C-x p</code> and select one from the list or create a new one. The <code>ews-org-count-words</code> function cycles through all headings in your open Org buffer and adds a word count for each heading, including the subheadings. To add a target word count, add a new property called <code class="verbatim">target</code> and add the relevant number.</p>
<div class="src src-elisp">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-elisp" data-lang="elisp"><span style="display:flex;"><span>  (<span style="color:#007020">defun</span> <span style="color:#963">ews-org-count-words</span> ()
</span></span><span style="display:flex;"><span>    <span style="background-color:#fff0f0">&#34;Add word count to each heading property drawer in an Org mode buffer.&#34;</span>
</span></span><span style="display:flex;"><span>    (<span style="color:#007020">interactive</span>)
</span></span><span style="display:flex;"><span>    (<span style="color:#963">org-map-entries</span>
</span></span><span style="display:flex;"><span>     (<span style="color:#007020">lambda</span> ()
</span></span><span style="display:flex;"><span>       (<span style="color:#007020">let*</span> ((<span style="color:#963">start</span> (<span style="color:#06b;font-weight:bold">point</span>))
</span></span><span style="display:flex;"><span>              (<span style="color:#963">end</span> (<span style="color:#007020">save-excursion</span> (<span style="color:#963">org-end-of-subtree</span>)))
</span></span><span style="display:flex;"><span>              (<span style="color:#963">word-count</span> (<span style="color:#963">count-words</span> <span style="color:#963">start</span> <span style="color:#963">end</span>)))
</span></span><span style="display:flex;"><span>         (<span style="color:#963">org-set-property</span> <span style="background-color:#fff0f0">&#34;wordcount&#34;</span> (<span style="color:#06b;font-weight:bold">number-to-string</span> <span style="color:#963">word-count</span>))
</span></span><span style="display:flex;"><span>         (<span style="color:#007020">unless</span> (<span style="color:#963">org-entry-get</span> <span style="color:#036;font-weight:bold">nil</span> <span style="background-color:#fff0f0">&#34;target&#34;</span>)
</span></span><span style="display:flex;"><span>           (<span style="color:#963">org-set-property</span> <span style="background-color:#fff0f0">&#34;target&#34;</span> <span style="background-color:#fff0f0">&#34;0&#34;</span>))))))</span></span></code></pre></div>
</div>
<p>
A collapsible property drawer shows a word count and your manually added target. When no target property exists yet, this function will add one with zero as a default. This property drawer works the same way as the notes drawer discussed previously.</p>
<div class="src src-org">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span><span style="color:#888">  :PROPERTIES:
</span></span></span><span style="display:flex;"><span><span style="color:#888"></span><span style="color:#c00;font-weight:bold">  :wordcount: 305
</span></span></span><span style="display:flex;"><span><span style="color:#c00;font-weight:bold">  :target: 300
</span></span></span><span style="display:flex;"><span><span style="color:#c00;font-weight:bold"></span><span style="color:#888">  :END:</span></span></span></code></pre></div>
</div>
<p>
You can view the word count for each heading in Org mode&#39;s property column view <code class="verbatim">C-c C-x c</code> (<code>org-columns</code>). Ensure you evaluate this function at the highest level (beginning of the document). Org mode only shows the properties for the subtree you are currently in. This view creates an overlay. By cylcing through the document with <code class="verbatim">S-TAB</code>, a table will appear. To include the word counts and targets, you will need to add this line at the start of the document, which defines which properties to see in each column :</p>
<div class="src src-org">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span>  #+columns: %40item %10todo %10wordcount %10target</span></span></code></pre></div>
</div>
<p>
The columns are an overlay and not part of the text, so nothing you wrote is modified. You can keep editing your document in column view. Place the cursor on a column overlay to remove the overlay and press <code class="verbatim">q</code>.</p>
&nbsp;
</div>
</div>
<div id="outline-container-headline-14" class="outline-3">
<h3 id="headline-14">
Status Tracking
</h3>
<div id="outline-text-headline-14" class="outline-text-3">
<p>As you are working on various parts of your writing project it might be godo to know what the status of each chapter is.</p>
<p>
Org mode also has an extensive <a href="https://lucidmanager.org/productivity/getting-things-done-with-emacs/">system to manage projects</a>, which you can also deploy to keep track of progress in your document.</p>
<p>
Each heading in Org mode can have a status token, such as <code class="verbatim">TODO</code>, <code class="verbatim">DONE</code> or <code class="verbatim">EDITED</code>, or whatever workflow you like to use. You add a status token with the shift and left/right arrow keys when the cursor is on a heading. You can also use the <code class="verbatim">C-c C-t</code> shortcut (<code>org-todo</code>).</p>
<p>
By default, the system only uses the <code class="verbatim">TODO</code> and <code class="verbatim">DONE</code> status. You can add additional workflow states by defining them in the document header. The example below will cycle through these four status tokens. The tokens before the vertical line are in progress and usually marked in red. The vertical line are completed and marked in green. Org mode will add a timestamp when a section gets to the <code class="verbatim">FINAL</code> status in this example.</p>
<div class="src src-org">
<div class="highlight"><pre tabindex="0" style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-org" data-lang="org"><span style="display:flex;"><span>  #+todo: WRITE DRAFT EDIT | FINAL</span></span></code></pre></div>
</div>
<p>
Org mode has extensive facilities to <a href="https://orgmode.org/manual/TODO-Items.html">fine tune how these status tokens behave</a>, including adding notes and timestamps.</p>
</div>
</div>
</div>
</div>
<div id="outline-container-headline-15" class="outline-2">
<h2 id="headline-15">
Emacs Writing Studio
</h2>
<div id="outline-text-headline-15" class="outline-text-2">
<p>This article only covered the tip of the iceberg of the writing and editing functionality in Emacs. Many specialised packages are available to enhance your writing experience. I advise keeping it simple for now and spend your tie writing instead of configuring Emacs. When you discover a new need, a few Google searches will often give you exactly what you need.</p>
<p>
The <a href="https://lucidmanager.org/tags/emacs/">Emacs Writing Studio</a> consists of a series of articles and a configuration to help you publish articles, books, movie and theatre scripts and websites. The configuration files are available on GitHub.</p>
<p>
<a href = "https://github.com/pprevos/emacs-writing-studio/" target="_blank"
   title="Download emacs-writing-studio from GitHub"
   alt="Download emacs-writing-studio from GitHub">
  <button class="button is-medium is-primary">
    <span class="icon is-large">
      <i class="fab fa-github"></i>
    </span>
    <span style="font-family: monospace">emacs-writing-studio</span>
  </button>
</a>

</p>
<p>
Emacs is a malleable system, so everybody will have their personal preferences. Any article on how to use Emacs is thus opinionated. If you have a different way of doing things, please complete the <a href="https://lucidmanager.org/contact/">contact form</a> to send me an email or contact me on social media.</p>
<p>
The screen still looks a bit plain, so in the next article we look at some techniques to improve the <a href="https://lucidmanager.org/productivity/ricing-org-mode/">look-and-feel or Emacs</a> and Org mode.</p>
</div>
</div>

      