<span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Adc&amp;rfr_id=info%3Asid%2Focoins.info%3Agenerator&amp;rft.type=&amp;rft.format=text&amp;rft.title=Argos Panopt√®s, un outil de supervision&amp;rft.source=Framablog&amp;rft.date=2024-05-06&amp;rft.identifier=https://framablog.org/?p=34780&amp;rft.language=English&amp;rft.subject=Enjeux du num√©rique&amp;rft.au="></span><p><em>Pour Framaspace, Framasoft a fait d√©velopper un outil de supervision de sites web nomm√© Argos Panopt√®s (ou juste Argos pour aller plus vite).</em></p>
<p><em>D√©velopp√© par Alexis M√©taireau, d√©veloppeur entre autres du g√©n√©rateur de site statique <a href="https://getpelican.com">Pelican</a>, et de l&rsquo;outil de gestion de d√©penses √† plusieurs ¬´&#160;<a href="https://ihatemoney.org/">I Hate money</a>&#160;¬ª (repris dans <a href="https://apps.nextcloud.com/apps/cospend">l&rsquo;app cospend</a> sur Nextcloud), le besoin a √©t√© d√©fini par Luc Didry, l&rsquo;administrateur syst√®me de Framasoft. </em></p>
<p><em>Luc et Alexis r√©pondent √† nos questions dans cet interview, pour plus d&rsquo;information concernant Argos vous pouvez consulter <a href="https://framablog.org/2024/05/16/argos-panoptes-la-supervision-de-sites-web-simple-et-efficace/">l&rsquo;article d√©di√©</a>.<br />
</em></p>
<p><span id="more-34780"></span></p>
<h3>Bonjour √† tous les deux&#160;:) Ici on conna√Æt d√©j√† Luc puisque c&rsquo;est notre admin sys pr√©f√©r√©, mais Alexis, peux-tu nous dire qui tu es pour le framablog&#160;?</h3>
<p><strong>Alexis&#160;:</strong> Bonjour, Framasoft, et merci pour la discussion&#160;! Et bien, c&rsquo;est parti pour l&rsquo;exercice de la pr√©sentation alors.</p>
<p>Je suis un d√©veloppeur de bient√¥t 40 ans, int√©ress√© par les dynamiques collectives, le logiciel libre et la protection des donn√©es personnelles, depuis quelques ann√©es maintenant. Par le pass√© j&rsquo;ai pu publier et maintenir quelques outils comme Pelican, un g√©n√©rateur de sites statiques et I hate money, pour g√©rer les d√©penses partag√©es. J&rsquo;ai travaill√© quelques ann√©es pour Mozilla sur la partie synchronisation et chiffrement des donn√©es (Firefox Sync, Kinto) et sur quelques autres outils.</p>
<p>J&rsquo;ai quitt√© le d√©veloppement ¬´&#160;pro&#160;¬ª entre 2018 et 2023. Durant ces ann√©es j&rsquo;ai eu la chance / le privil√®ge de pouvoir monter une brasserie sur Rennes avec un ami. Nous avons essay√© de faire vivre les valeurs de la collaboration (plut√¥t que celles de la comp√©tition). Cela est rest√© tr√®s proche des valeurs du logiciel libre, nos recettes et les plans de nos machines √©tant par exemple publi√©s sur notre site web.</p>
<p>√Ä l&rsquo;√©t√© 2023 j&rsquo;ai d√©cid√© de quitter la brasserie pour √† la fois refaire du d√©veloppement et travailler sur les outils de la prise de d√©cision collective, et la gestion des conflits dans les collectifs. C&rsquo;est √† ce moment que nous sommes rentr√©s en contact avec Luc pour travailler sur Argos.</p>
<h3>Pouvez-vous nous pr√©senter l&rsquo;outil Argos sur lequel vous avez travaill√©&#160;? √Ä quel besoin r√©pond-il pour Framaspace&#160;?</h3>
<p><strong>Alexis&#160;:</strong> Argos est un outil de supervision de sites web. L&rsquo;id√©e est assez simple&#160;: surveiller que les sites vont bien, et g√©n√©rer des alertes quand c&rsquo;est utile, en envoyant des notifications par email ou autre.</p>
<p>La sp√©cificit√© d&rsquo;Argos est de pouvoir g√©rer un nombre de sites important. Framaspace, en grossissant, expose pas loin de 900 domaines au public, qui parfois tombent en panne. Je crois que le r√©el besoin derri√®re Argos √©tait de simplifier la vie de Luc (vous saviez qu&rsquo;il n&rsquo;y avait qu&rsquo;un seul adminsys chez Framasoft&#160;?&#160;!&#160;!) et de lui permettre d&rsquo;avoir une meilleure vision globale de l&rsquo;√©tat du service.</p>
<p>Les v√©rifications concernent les statuts du site web, mais aussi l&rsquo;√©tat des certificats SSL, par exemple, et quelques v√©rifications sp√©cifiques.</p>
<p><strong>Luc&#160;:</strong> On surveillait d√©j√† plus de 200 sites via notre outil de supervision (Shinken), mais celui-ci, avec toutes les autres sondes de supervision de notre infrastructure, avait bien de la peine √† repasser toutes les 5 minutes sur les sites. Ce qui faisait qu‚Äôon pouvait se rendre compte qu‚Äôun site √©tait tomb√© au bout de trop de temps.</p>
<p>Avec Framaspace, je savais que j‚Äôaurai des centaines (et √† terme des milliers) de sites √† surveiller en plus, sachant qu‚Äôun site est la cible de plusieurs v√©rifications, comme dit par Alexis. Il fallait donc un outil d√©di√©.</p>
<p>Les outils existants comme <a href="https://statping-ng.github.io">statping-ng</a> ou <a href="https://uptime.kuma.pet">Uptime Kuma</a> pr√©sentent un d√©faut r√©dhibitoire&#160;: vouloir afficher l‚Äô√©tat de chaque site en m√™me temps sur l‚Äôinterface web. √áa va bien quand on a quelques sites, pas quand on en a des centaines (l‚Äôoutil peine √† envoyer les donn√©es de centaines de sites).</p>
<p>C‚Äôest de l√† qu‚Äôest n√©e l‚Äôid√©e d‚ÄôArgos, qui a le bon go√ªt de n‚Äôafficher qu‚Äôun r√©sum√© de l‚Äô√©tat des sites par d√©faut.</p>
<p>&nbsp;</p>
<div style="width: 998px" class="wp-caption aligncenter"><img loading="lazy" decoding="async" class="transparent shrinkToFit" src="https://asso.framasoft.org/pic/UQoY9fgV/paCVbnU1.png" alt="4 blocs avec des statuts (inconnu, ok, avertissement, erreur) et pour chacun, un nombre correspondant." width="988" height="752" /><p class="wp-caption-text">Capture d‚Äô√©cran de la page de statut d‚ÄôArgos</p></div>
<p>&nbsp;</p>
<h3>Si on regarde de plus pr√®s les coutures, on voit que c&rsquo;est d√©velopp√© en langage <a href="https://fr.wikipedia.org/wiki/Python_(langage)"">Python</a> avec une base de donn√©es en PostgreSQL. Laissez-moi deviner&#160;: Alexis a choisi Python et Luc a choisi PostgreSQL&#160;?</h3>
<p><strong>Alexis&#160;:</strong> Ah, je vois que tu nous connais un peu, mais figure toi que m√™me pas&#160;! J&rsquo;aurais aim√© plaider coupable pour le coup, mais Luc cherchait sp√©cifiquement quelqu&rsquo;un qui savait faire du Python, et c&rsquo;est comme √ßa qu&rsquo;on s&rsquo;est rencontr√©. J&rsquo;ai propos√© d&rsquo;utiliser le <a href="https://fr.wikipedia.org/wiki/Framework">framework</a> FastAPI √† la place de Flask parce que √ßa nous permettait de faire de l&rsquo;asynchrone de mani√®re plus simple, et d&rsquo;utiliser les fonctionnalit√©s de typage de Python.</p>
<p><strong>Luc&#160;:</strong> Pour Framaspace, j‚Äôai √©t√© plus ou moins oblig√© de faire du Python car <a href="https://fr.wikipedia.org/wiki/Salt_(logiciel)">Salt</a>, l‚Äôorchestrateur utilis√© pour d√©ployer les espaces est en Python&#160;: je pouvais, en utilisant ce langage, l‚Äôutiliser comme une biblioth√®que, sans utiliser de bidouilles sales.</p>
<p>Comme Argos a √©t√© cr√©√© dans le cadre de Framaspace, j‚Äôai voulu garder le m√™me langage de programmation, pour avoir un tout coh√©rent.</p>
<p>Python n‚Äôest pas un langage si pire que √ßa. Il n‚Äôest pas amusant, mais √ßa fait le job. Peut-√™tre aussi que je vieillis&#160;: j‚Äôutilise de plus en plus Python pour des scripts. Peut-√™tre qu‚Äô√©crire des scripts ne m‚Äôamuse plus, et que je veux les √©crire vite pour passer √† autre chose.</p>
<p><a href="https://framablog.org/wp-content/uploads/2024/05/The_rock_driving_perl_python.jpeg"><img loading="lazy" decoding="async" class="size-medium wp-image-34822 aligncenter" src="https://framablog.org/wp-content/uploads/2024/05/The_rock_driving_perl_python-244x300.jpeg" alt="M√®me the Rock qui conduit - Et ton machin va √™tre en Perl, comme d'hab - Non j'ai choisi Python cette fois The rock se retourne, interloqu√©" width="244" height="300" srcset="https://framablog.org/wp-content/uploads/2024/05/The_rock_driving_perl_python-244x300.jpeg 244w, https://framablog.org/wp-content/uploads/2024/05/The_rock_driving_perl_python.jpeg 500w" sizes="(max-width: 244px) 100vw, 244px" /></a></p>
<h3>La question habituelle de libriste&#160;: pourquoi avez-vous choisi de d√©velopper un outil d√©di√©, il n&rsquo;existait pas d&rsquo;outils libres pour de la supervision&#160;? Quelles sont ses sp√©cificit√©s&#160;?</h3>
<p><strong>Alexis&#160;:</strong> Je te laisse r√©pondre Luc, c&rsquo;est toi qui a affin√© le besoin&#160;:-)</p>
<p><strong>Luc&#160;:</strong> Ah bah zut, j‚Äôai d√©j√† r√©pondu au-dessus üòÖ</p>
<p>L‚Äôavantage d‚Äôavoir notre propre outil nous permet aussi de le tordre pour nos besoins sp√©cifiques. Ainsi Argos envoie-t-il des notifications √† notre serveur <a href="https://gotify.net/">Gotify</a>. Int√©grer un tel canal de communication dans un outil existant aurait pu prendre du temps (comprendre le code, faire une PR, attendre une release‚Ä¶).</p>
<h3>En lisant la doc, √ßa a l&rsquo;air tout simple √† utiliser par rapport √† d&rsquo;autres outils&#160;!&#160;! Comme administrateur‚ãÖice syst√®me du dimanche apr√®s-midi, si je veux surveiller l&rsquo;√©tat de mes sites, est-ce qu&rsquo;il y a des pi√®ges ou des choses √† savoir&#160;?</h3>
<p><strong>Alexis&#160;:</strong> Je pense que √ßa pourrait tout √† fait permettre de surveiller l&rsquo;√©tat de quelques sites, bien que peut-√™tre surdimensionn√©. Argos a besoin de lancer un serveur, une base de donn√©es et des agents. Est-ce bien utile pour un‚ãÖe adminSys du dimanche&#160;? Peut-√™tre&#160;!</p>
<p><strong>Luc&#160;:</strong> Franchement, je pense qu‚Äôil peut √™tre utilis√© aussi bien par une grosse organisation que par un¬∑e adminSys du dimanche. La configuration est simple, l‚Äôinstallation pas tr√®s compliqu√©e, et il n‚Äôa pas l‚Äôair de consommer beaucoup de ressources.</p>
<h3>Alexis tu √©tais en mode prestation pour d√©velopper, comment s&rsquo;est pass√©e la relation avec Framasoft&#160;?</h3>
<p><strong>Alexis&#160;:</strong> Franchement, c&rsquo;√©tait une surprise totale, et un plaisir du d√©but √† la fin. On a d&rsquo;abord pu se faire quelques appels avec Luc pour clarifier les besoins, je me suis retrouv√© avec une liste de fonctionnalit√©s de base, et j&rsquo;ai avanc√© comme √ßa.</p>
<p>Quand j&rsquo;avais besoin j&rsquo;ai pu √©changer avec Luc qui √©tait toujours assez r√©actif, et j&rsquo;ai pu lever quelques blocages. J&rsquo;ai beaucoup appr√©ci√© r√©pondre √† un besoin concret, en ayant l&rsquo;utilisateur final au bout du fil pour clarifier les choses.</p>
<p>Par la suite, on a pu se faire quelques sessions ensemble, √† la fois de pr√©sentation de l&rsquo;outil, puis de pair-programming pour accompagner Luc sur certains aspects quand c&rsquo;√©tait utile, l&rsquo;id√©e √©tant que ce soit lui qui prenne la main sur le projet.</p>
<p>C&rsquo;√©tait en fait ma premi√®re mission en tant que ¬´&#160;prestataire&#160;¬ª, je crois que je suis tr√®s bien tomb√©&#160;!</p>
<p><strong>Luc&#160;:</strong> Pareil de mon c√¥t√©, c‚Äô√©tait tr√®s agr√©able de bosser avec toi&#160;!</p>
<h3>Est-ce que vous pensez que √ßa peut √™tre utilis√© dans d&rsquo;autres contextes que Framaspace&#160;?</h3>
<p><strong>Alexis&#160;:</strong> je pense que √ßa peut √™tre utilis√© dans d&rsquo;autres contextes bien s√ªr. Je pense aux ¬´&#160;fermes de sites&#160;¬ª, comme par exemple ce que peut faire NoBlogs en Allemagne, mais de mani√®re g√©n√©rale c&rsquo;est utile d&rsquo;avoir un outil simple d&rsquo;acc√®s pour faire de la supervision. Bosser l√†-dessus m&rsquo;a donn√© envie de permettre de faire de la supervision ¬´&#160;en tant que service&#160;¬ª, pour des collectifs pour qui ce serait utile, mais‚Ä¶ j&rsquo;imagine que c&rsquo;est une autre histoire.</p>
<p><strong>Luc&#160;:</strong> Carr√©ment&#160;! Pas seulement pour des fermes de sites mais partout o√π on a besoin d‚Äôune supervision qui passe tr√®s r√©guli√®rement. On peut avoir des v√©rifications effectu√©es toutes les minutes, ce qui peut √™tre utile sur des sites qui ne doivent pas tomber. Et un grand nombre de sites ne devrait pas faire peur √† Argos&#160;: on peut multiplier le nombre d‚Äôagents (le logiciel qui s‚Äôoccupe d‚Äôeffectuer les v√©rifications et d‚Äôen remonter le r√©sultat au serveur), et le choix de PostgreSQL comme base de donn√©es a (aussi) √©t√© fait parce que c‚Äôest un <a href="https://fr.wikipedia.org/wiki/Syst%C3%A8me_de_gestion_de_base_de_donn%C3%A9es"><abbr title="Syst√®me de Gestion de Base de Donn√©es">SGBD</abbr></a> robuste qui peut encaisser de la charge de travail.</p>
<h3>Et est-ce que vous imaginez une suite, avec une feuille de route ou des invitations √† contribuer&#160;?</h3>
<p><strong>Luc&#160;:</strong> Il y a d√©j√† <a href="https://framagit.org/framasoft/framaspace/argos/-/issues/">des id√©es de d√©veloppements futurs</a> pour am√©liorer Argos, mais √ßa n‚Äôest pas urgent&#160;: la premi√®re version est d√©j√† tout √† fait fonctionnelle.</p>
<p><strong>Alexis&#160;:</strong> J&rsquo;aime bien l&rsquo;id√©e de ne pas avoir de feuille de route trop pr√©cise pour le futur, ce qui nous permet de se concentrer sur des besoins r√©els et de ne pas en faire une usine √† gaz. Si vous l&rsquo;utilisez et que vous avez des retours √† faire, ou bien si vous souhaitez contribuer, n&rsquo;h√©sitez pas. C&rsquo;est pens√© pour √™tre simple √† √©tendre, donc n&rsquo;h√©sitez pas √† jeter un ≈ìil et √† proposer des changements.</p>
<h3>Si vous avez encore des choses √† dire&#160;:)</h3>
<p><strong>Alexis&#160;:</strong> Coucou Numahell, chouette de te recroiser par ici apr√®s ces quelques ann√©es&#160;:-)</p>
<p><strong>Luc&#160;:</strong> Merci √† toi, Alexis, pour le temps b√©n√©vole que tu as consacr√© √† Argos apr√®s ta prestation&#160;!</p>
<h2>Pour aller plus loin</h2>
<ul>
<li><a href="https://framagit.org/framasoft/framaspace/argos">D√©p√¥t</a></li>
<li><a href="https://framasoft.frama.io/framaspace/argos/">Documentation</a></li>
</ul>
