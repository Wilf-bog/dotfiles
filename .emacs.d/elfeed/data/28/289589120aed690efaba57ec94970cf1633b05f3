
         
         <p>Starting with commit <code class="language-plaintext highlighter-rouge">573db12</code> in the modus-themes.git repository,
users can now extend the palette of the active theme with their own
colour definitions. This makes it easier to reuse colour values when
defining overrides for palette entries (overrides allow the user to,
for example, change the mapping of <code class="language-plaintext highlighter-rouge">string</code> from a shade of blue to a
shade of green—changes apply across all faces due to how semantic
entries are defined in the palette).</p>

<p>By default, the palette of each theme includes something like this:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;; Excerpt from `modus-operandi-palette'.</span>
<span class="p">(</span><span class="nv">red</span>             <span class="s">"#a60000"</span><span class="p">)</span>
<span class="p">(</span><span class="nv">red-warmer</span>      <span class="s">"#972500"</span><span class="p">)</span>
<span class="p">(</span><span class="nv">red-cooler</span>      <span class="s">"#a0132f"</span><span class="p">)</span>
<span class="p">(</span><span class="nv">red-faint</span>       <span class="s">"#7f0000"</span><span class="p">)</span>
<span class="p">(</span><span class="nv">red-intense</span>     <span class="s">"#d00000"</span><span class="p">)</span>
<span class="p">(</span><span class="nv">green</span>           <span class="s">"#006800"</span><span class="p">)</span>
<span class="p">(</span><span class="nv">green-warmer</span>    <span class="s">"#316500"</span><span class="p">)</span>
<span class="p">(</span><span class="nv">green-cooler</span>    <span class="s">"#00663f"</span><span class="p">)</span>
<span class="p">(</span><span class="nv">green-faint</span>     <span class="s">"#2a5045"</span><span class="p">)</span>
<span class="p">(</span><span class="nv">green-intense</span>   <span class="s">"#008900"</span><span class="p">)</span>
</code></pre></div></div>

<p>As well as semantic mappings like:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;; Excerpt from `modus-operandi-palette'.</span>
<span class="p">(</span><span class="nv">builtin</span> <span class="nv">magenta-warmer</span><span class="p">)</span>
<span class="p">(</span><span class="nv">comment</span> <span class="nv">fg-dim</span><span class="p">)</span>
<span class="p">(</span><span class="nv">constant</span> <span class="nv">blue-cooler</span><span class="p">)</span>
<span class="p">(</span><span class="nv">docstring</span> <span class="nv">green-faint</span><span class="p">)</span>
<span class="p">(</span><span class="nv">docmarkup</span> <span class="nv">magenta-faint</span><span class="p">)</span>
<span class="p">(</span><span class="nv">fnname</span> <span class="nv">magenta</span><span class="p">)</span>
<span class="p">(</span><span class="kt">keyword</span> <span class="nv">magenta-cooler</span><span class="p">)</span>
<span class="p">(</span><span class="nv">preprocessor</span> <span class="nv">red-cooler</span><span class="p">)</span>
<span class="p">(</span><span class="nb">string</span> <span class="nv">blue-warmer</span><span class="p">)</span>
<span class="p">(</span><span class="k">type</span> <span class="nv">cyan-cooler</span><span class="p">)</span>
<span class="p">(</span><span class="nv">variable</span> <span class="nv">cyan</span><span class="p">)</span>
</code></pre></div></div>

<p>Instead of overriding, say, the values of existing entries like <code class="language-plaintext highlighter-rouge">red</code>
and <code class="language-plaintext highlighter-rouge">magenta-cooler</code>, the user may now define their own <code class="language-plaintext highlighter-rouge">cherry</code> and
<code class="language-plaintext highlighter-rouge">plum</code> colours, which can then be used as part of the palette overrides.</p>

<h2>Add more colours per-theme</h2>

<p>Here is how the new definitions are added to the <code class="language-plaintext highlighter-rouge">modus-operandi</code>
theme:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;; Define two new colors in the "user" palette of `modus-operandi'.</span>
<span class="c1">;; Other themes will not use these.</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">modus-operandi-palette-user</span>
      <span class="o">'</span><span class="p">((</span><span class="nv">cherry</span> <span class="s">"#a0134f"</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">plum</span> <span class="s">"#6f459a"</span><span class="p">)))</span>
</code></pre></div></div>

<p>Each theme provides a user option of the form <code class="language-plaintext highlighter-rouge">THEME-NAME-palette-user</code>,
where <code class="language-plaintext highlighter-rouge">THEME-NAME</code> is the name of the theme, like <code class="language-plaintext highlighter-rouge">modus-operandi-tinted</code>
or <code class="language-plaintext highlighter-rouge">modus-vivendi-tritanopia</code>.</p>

<p>[ The new colours follow the same principles as those of the core
  palette, so please read the relevant documentation. ]</p>

<p>Now that <code class="language-plaintext highlighter-rouge">cherry</code> and <code class="language-plaintext highlighter-rouge">plum</code> are known, they can be used as semantic
palette overrides. Thus:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;; Use entries from `modus-operandi-palette-user' in the overrides.</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">modus-operandi-palette-overrides</span>
      <span class="o">'</span><span class="p">((</span><span class="nv">cursor</span> <span class="nv">cherry</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">string</span> <span class="nv">plum</span><span class="p">)))</span>
</code></pre></div></div>

<p>The themes have lots of semantic mappings, including for programming
code syntax, Org heading levels, mode lines, and more. Again, read the
manual for the technicalities.</p>

<p>Tweaks on a per-theme basis give the user maximum flexibility. For
example, they can have the above for <code class="language-plaintext highlighter-rouge">modus-operandi</code> while they use
these for <code class="language-plaintext highlighter-rouge">modus-vivendi</code>:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">setq</span> <span class="nv">modus-vivendi-palette-user</span>
      <span class="o">'</span><span class="p">((</span><span class="nv">apricot</span> <span class="s">"#dfb350"</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">kiwi</span> <span class="s">"#80d458"</span><span class="p">)))</span>

<span class="p">(</span><span class="k">setq</span> <span class="nv">modus-vivendi-palette-overrides</span>
      <span class="o">'</span><span class="p">((</span><span class="nv">cursor</span> <span class="nv">apricot</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">string</span> <span class="nv">kiwi</span><span class="p">)))</span>
</code></pre></div></div>

<h2>More colours common to all themes</h2>

<p>Same principle as above, but instead of defining new colours for each
theme, they are available to all themes:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">setq</span> <span class="nv">modus-themes-common-palette-user</span>
      <span class="o">'</span><span class="p">((</span><span class="nv">apricot</span> <span class="s">"#dfb350"</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">cherry</span> <span class="s">"#a0134f"</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">kiwi</span> <span class="s">"#80d458"</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">plum</span> <span class="s">"#6f459a"</span><span class="p">)))</span>
</code></pre></div></div>

<p>Then the user can either apply those to the “common” palette overrides
or implement overrides on a per-theme basis. Since I already showed
the latter, here is the former scenario:</p>

<div class="language-elisp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="k">setq</span> <span class="nv">modus-themes-common-palette-overrides</span>
      <span class="o">'</span><span class="p">((</span><span class="nv">cursor</span> <span class="nv">apricot</span><span class="p">)</span>
        <span class="p">(</span><span class="kt">keyword</span> <span class="nv">cherry</span><span class="p">)</span>
        <span class="p">(</span><span class="nb">string</span> <span class="nv">kiwi</span><span class="p">)</span>
        <span class="p">(</span><span class="nv">comment</span> <span class="nv">plum</span><span class="p">)))</span>
</code></pre></div></div>

<p>Note, however, that using common overrides this way runs the risk of
producing inaccessible colour combinations. Indeed, those I show above
are not optimal for all themes. But you get the idea of how this
works.</p>

<h2>Coming in modus-themes version 4.5.0</h2>

<p>This feature will be widely available in the next stable release of
the themes, adding to an already comprehensive framework for theming
that is decidedly “Emacs-y” with all the customisations it provides.</p>

<p>I do not know if <code class="language-plaintext highlighter-rouge">4.5.0</code> can still make it into Emacs 30, as the
branch was created a few days ago, but it will definitely be in
emacs.git (now the development target for Emacs 31) as well as GNU
ELPA.</p>

<h2>About the Modus themes</h2>

<p>Highly accessible themes, conforming with the highest standard for
colour contrast between background and foreground values (WCAG AAA).
They also are optimised for users with red-green or blue-yellow colour
deficiency.</p>

<p>The themes are very customisable and provide support for a wide range
of packages.  Their manual is detailed so that new users can get
started, while it also provides custom code for all sorts of more
advanced customisations.</p>

<p>Since August 2020, the original Modus themes (<code class="language-plaintext highlighter-rouge">modus-operandi</code>,
<code class="language-plaintext highlighter-rouge">modus-vivendi</code>) are built into Emacs version 28 or higher.  Emacs 28
ships with <code class="language-plaintext highlighter-rouge">modus-themes</code> version <code class="language-plaintext highlighter-rouge">1.6.0</code>.  Emacs 29 includes version
<code class="language-plaintext highlighter-rouge">3.0.0</code>.  Emacs 30 provides a newer, refactored version that
thoroughly refashions how the themes are implemented and customized.
Such major versions are not backward-compatible due to the limited
resources at my disposal to support multiple versions of Emacs and of
the themes across the years.</p>

<ul>
  <li>Package name (GNU ELPA): <code class="language-plaintext highlighter-rouge">modus-themes</code></li>
  <li>Official manual: <a href="https://protesilaos.com/emacs/modus-themes">https://protesilaos.com/emacs/modus-themes</a></li>
  <li>Change log: <a href="https://protesilaos.com/emacs/modus-themes-changelog">https://protesilaos.com/emacs/modus-themes-changelog</a></li>
  <li>Colour palette: <a href="https://protesilaos.com/emacs/modus-themes-colors">https://protesilaos.com/emacs/modus-themes-colors</a></li>
  <li>Sample pictures: <a href="https://protesilaos.com/emacs/modus-themes-pictures">https://protesilaos.com/emacs/modus-themes-pictures</a></li>
  <li>Git repositories:
    <ul>
      <li>GitHub: <a href="https://github.com/protesilaos/modus-themes">https://github.com/protesilaos/modus-themes</a></li>
      <li>GitLab: <a href="https://gitlab.com/protesilaos/modus-themes">https://gitlab.com/protesilaos/modus-themes</a></li>
    </ul>
  </li>
  <li>Backronym: My Old Display Unexpectedly Sharpened … themes.</li>
</ul>
        
      