<!-- SC_OFF --><div class="md"><p>I am trying to use completing-read inside a function, but it gives errors. I have the following code that works fine.</p> <pre><code>(setq first-alist &#39;((one . two) (three . four) (five . six))) (completing-read &quot;Prompt: &quot; (lambda (input predicate action) (if (eq action &#39;metadata) `(metadata (annotation-function . (lambda (str) (concat &quot; : &quot; (cdr (assoc str first-alist)))))) (complete-with-action action (mapcar &#39;car first-alist) input predicate)))) </code></pre> <p>If I put that completing-read function in another function to which I pass an alist, it gives an error which says <code>(void-variable some-alist)</code>. Is completing-read not supposed to be used in functions? If it is, then what changes can I make to use it correctly. Thanks.</p> <pre><code>(setq second-alist &#39;((a . b) (c . d) (e . f))) (defun blahblah (some-alist) (completing-read &quot;Prompt: &quot; (lambda (input predicate action) (if (eq action &#39;metadata) `(metadata (annotation-function . (lambda (str) (concat &quot; : &quot; (cdr (assoc str some-alist)))))) (complete-with-action action (mapcar &#39;car some-alist) input predicate))))) (blahblah second-alist) </code></pre> </div><!-- SC_ON --> &#32; submitted by &#32; <a href="https://www.reddit.com/user/Calm-Bass-4740"> /u/Calm-Bass-4740 </a> <br/> <span><a href="https://www.reddit.com/r/emacs/comments/1e75k6j/completingread_in_a_function/">[link]</a></span> &#32; <span><a href="https://www.reddit.com/r/emacs/comments/1e75k6j/completingread_in_a_function/">[comments]</a></span>